# extends 'lesson/lesson_base.html'

# block lesson_content
  <div class="col-lg-8">
    <div class="bs-component">
    <div class="well well-lg">
      <form action="/new-lesson/" method="post" id="new-lesson-form" data-autosubmit>
      {{requestt}}
        {{form.csrf_token}}
        <div class="panel-group">
          {{ form.name }}
          {{ form.topics }}
          {{ form.description }}
          {{ form.video_url }}
          {{ form.lesson_version }}
        </div>
        <button type="submit" class="btn btn-primary btn-lg btn-block btn-loading">
          Create a New Lesson
        </button>
      </form>
    </div>
    </div>
  </div>

  <div class="col-lg-3">
    <div class="bs-component">
    <div class="well well-lg">
      Nothing here yet
    </div>
    </div>
  </div>
  <script type="text/javascript">
    var csrftoken = "{{ csrf_token() }}";
    $.ajaxSetup({
    beforeSend: function(xhr, settings) {
        if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken)
            }
        }
    });

    $("#new-lesson-form").submit(function() {
      $.ajax({
             type: "POST",
             url: '/new-lesson/',
             data: $("#new-lesson-form").serialize(), // serializes the form's elements.
             success: function(data)
             {
                 alert(data); // show response from the php script.
             }
           });
      event.preventDefault(); // avoid to execute the actual submit of the form.
    });
  </script>
# endblock
